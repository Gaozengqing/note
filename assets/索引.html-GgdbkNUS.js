import{_ as n,o as s,c as a,d as e}from"./app-jFZM-UYu.js";const p={},t=e(`<h1 id="索引" tabindex="-1"><a class="header-anchor" href="#索引" aria-hidden="true">#</a> 索引</h1><p>索引是一种单独的、物理的存储结构，为数据表创建索引可以快速找到目标数据，也可以对数据表中一列或多列的值进行排序。</p><h3 id="tip" tabindex="-1"><a class="header-anchor" href="#tip" aria-hidden="true">#</a> Tip</h3><hr><p>常见的索引：普通，唯一性，主键，全文，空间 普通索引是MySQL中的基本索引类型，使用KEY或INDEX关键字定义，不需要添加任何限制条件。</p><p>唯一性索引用于限制字段不能出现重复值时，在创建唯一约束时，唯一性索引会被自动创建。 创建唯一性索引的字段允许有NULL值，且NULL值不会被视为重复值。</p><p>主键索引用于根据主键自身的唯一性标识每一条记录。在创建主键约束时，主键索引会被自动创建。主键索引的字段不允许有NULL值。</p><p>全文索引主要用于提高数据量较大的字段的查询效率。全文索引只能创建在CHAR、VARCHAR或TEXT类型的字段上。</p><p>空间索引只能创建在空间数据类型的字段上，空间数据类型存储的空间数据是指含有位置、大小、形状以及自身分布特征的数据。 创建空间索引的字段，必须将其声明为NOT NULL。</p><p>根据创建索引的字段个数分类： 单列索引 复合索引</p><p>单列索引是在表中单个字段上创建索引，它可以是普通索引、唯一索引或者全文索引，只要保证该索引只对应表中一个字段即可。</p><p>复合索引是指在多个字段上创建索引，字段的设置遵循“最左前缀”原则，把使用频率最高的字段放在索引字段列表的最左边。当查询条件中使用这些字段中的第一个字段时，该索引就会被使用。</p><p>虽然索引可以提高数据的查询速度，但同时<strong>索引会占用一定的磁盘空间</strong>，<strong>并且</strong>在<strong>创建和维护索引</strong>时，其消耗的<strong>时间是随着数据量的增加而增加</strong>的。因此，使用索引时需要综合考虑索引的优点和缺点。</p><hr><p>为数据表建立<strong>事务</strong>以确保一组SQL语句操作数据的完整性。 为数据表建立<strong>视图</strong>以提高数据的安全性。 为数据表建立<strong>索引</strong>以加快数据的查询效率。</p><h2 id="索引的使用" tabindex="-1"><a class="header-anchor" href="#索引的使用" aria-hidden="true">#</a> 索引的使用</h2><h3 id="创建" tabindex="-1"><a class="header-anchor" href="#创建" aria-hidden="true">#</a> 创建</h3><h4 id="再创建数据表的同时创建索引" tabindex="-1"><a class="header-anchor" href="#再创建数据表的同时创建索引" aria-hidden="true">#</a> 再创建数据表的同时创建索引</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
字段名 数据类型 <span class="token punctuation">[</span>字段属性<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
{<span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEY</span>} <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span><span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEY</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token operator">|</span> {FULLTEXT<span class="token operator">|</span>SPATIAL} <span class="token punctuation">[</span><span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEY</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- {INDEX|KEY}：INDEX和KEY为同义词，表示索引，二者选一即可。</span>
<span class="token comment">-- 索引名：可选项，表示为创建的索引定义的名称，不使用该选项时，单列索引默认使用建立索引的字段表示，复合索引默认使用第一个字段的名称表示。</span>
<span class="token comment">-- 索引类型：可选项，不同的存储引擎允许在创建索引时指定索引类型，语法是USING {BTREE | HASH}，例如InnoDB和MyISAM支持BTREE，MEMORY支持BTREE和HASH。</span>
<span class="token comment">-- UNIQUE：可选项，表示唯一性索引。</span>
<span class="token comment">-- FULLTEXT：可选项，表示全文索引。</span>
<span class="token comment">-- SPATIAL：可选项，表示空间索引。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="为已有的数据表创建索引" tabindex="-1"><a class="header-anchor" href="#为已有的数据表创建索引" aria-hidden="true">#</a> 为已有的数据表创建索引</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token operator">|</span>FULLTEXT<span class="token operator">|</span>SPATIAL<span class="token punctuation">]</span> <span class="token keyword">INDEX</span> 索引名 <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token keyword">ON</span> 表名 <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="修改数据表的同时创建索引" tabindex="-1"><a class="header-anchor" href="#修改数据表的同时创建索引" aria-hidden="true">#</a> 修改数据表的同时创建索引</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名
<span class="token keyword">ADD</span> {<span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEY</span>} <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span><span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEY</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">[</span>索引类型<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token keyword">ADD</span> {FULLTEXT<span class="token operator">|</span>SPATIAL} <span class="token punctuation">[</span><span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEY</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看索引" tabindex="-1"><a class="header-anchor" href="#查看索引" aria-hidden="true">#</a> 查看索引</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 也可以使用SHOW CREATE TABLE语句，查看建表语句的同时也可以看到索引信息</span>

<span class="token keyword">SHOW</span> {INDEXES<span class="token operator">|</span><span class="token keyword">INDEX</span><span class="token operator">|</span><span class="token keyword">KEYS</span>} <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span>

<span class="token comment">-- 查看索引的结果中每个字段的含义：</span>

<span class="token comment">-- Table 索引所在的数据表的名称</span>
<span class="token comment">-- Non_unique  索引是否可以重复，0不可以，1可以</span>
<span class="token comment">-- Key_name  索引的名称，如果索引为主键索引，那么名称为PRIMARY</span>
<span class="token comment">-- Seq_in_index   建立索引的字段序号值，默认从1开始</span>
<span class="token comment">-- Column_name 建立索引的字段</span>
<span class="token comment">-- Collation   索引字段是否有排序，A有,NULL没有</span>
<span class="token comment">-- Cardinality MySQL连接时使用索引的可能性，值越大可能性越高</span>
<span class="token comment">-- Sub_part 前缀索引的长度，如字段值都被索引则Sub_part为NULL</span>
<span class="token comment">-- Packed   关键词如何被压缩，如果没有被压缩为NULL</span>
<span class="token comment">-- Null 索引字段是否含有NULL值</span>
<span class="token comment">-- Index type 索引方式，可选值为:FULLTEXT,HASH,BTREE,RTREE</span>
<span class="token comment">-- Comment  索引字段的注释信息</span>
<span class="token comment">-- Index comment  创建索引时添加的注释信息</span>
<span class="token comment">-- Visible  索引对查询优化器是否可见</span>
<span class="token comment">-- Expression  使用什么表达式作为建立索引的字段</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="分析sql是否使用索引" tabindex="-1"><a class="header-anchor" href="#分析sql是否使用索引" aria-hidden="true">#</a> 分析SQL是否使用索引</h4><p>使用EXPLAIN命令分析执行的SQL语句是否使用了索引 eg:explain select * from employee where dept_id=132;</p><h3 id="删除索引" tabindex="-1"><a class="header-anchor" href="#删除索引" aria-hidden="true">#</a> 删除索引</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> 索引名<span class="token punctuation">;</span>
<span class="token operator">or</span>
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> 索引名 <span class="token keyword">ON</span> 表名<span class="token punctuation">;</span>


<span class="token comment">-- 删除主键索引时，主键索引的索引名应使用PRIMARY，PRIMARY使用反引号“\`”包括。</span>
<span class="token comment"># 语法1</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token identifier"><span class="token punctuation">\`</span>PRIMARY<span class="token punctuation">\`</span></span><span class="token punctuation">;</span>
<span class="token comment"># 语法2</span>
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token identifier"><span class="token punctuation">\`</span>PRIMARY<span class="token punctuation">\`</span></span> <span class="token keyword">ON</span> 表名<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,29),o=[t];function c(l,i){return s(),a("div",null,o)}const r=n(p,[["render",c],["__file","索引.html.vue"]]);export{r as default};
